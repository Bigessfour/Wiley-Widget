<UserControl
    x:Class="WileyWidget.WinUI.Views.Main.SettingsView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d">

    <ScrollViewer>
        <StackPanel Margin="20" Spacing="16">
            <TextBlock
                Text="Settings"
                FontSize="32"
                FontWeight="Bold" />

            <TextBlock
                Text="{x:Bind ViewModel.StatusMessage, Mode=OneWay}"
                FontSize="14"
                Foreground="{ThemeResource TextFillColorSecondaryBrush}" />

            <!-- Database Settings -->
            <Border
                Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                CornerRadius="8"
                Padding="16">
                <StackPanel Spacing="12">
                    <TextBlock
                        Text="Database Configuration"
                        FontSize="20"
                        FontWeight="SemiBold" />

                    <TextBox
                        Header="Connection String"
                        Text="{x:Bind ViewModel.DatabaseConnectionString, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                        AcceptsReturn="True"
                        TextWrapping="Wrap"
                        Height="80" />

                    <Button
                        Content="Test Connection"
                        Command="{x:Bind ViewModel.TestDatabaseConnectionCommand}"
                        HorizontalAlignment="Left" />

                    <TextBlock
                        FontSize="14">
                        <Run Text="Status: " />
                        <Run Text="{x:Bind ViewModel.DatabaseConnected, Mode=OneWay}" FontWeight="Bold" />
                    </TextBlock>
                </StackPanel>
            </Border>

            <!-- QuickBooks Settings -->
            <Border
                Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                CornerRadius="8"
                Padding="16">
                <StackPanel Spacing="12">
                    <TextBlock
                        Text="QuickBooks Integration"
                        FontSize="20"
                        FontWeight="SemiBold" />

                    <TextBox
                        Header="Company File Path"
                        Text="{x:Bind ViewModel.QuickBooksCompanyFile, Mode=TwoWay}"
                        PlaceholderText="Path to QuickBooks company file" />

                    <Button
                        Content="Test QuickBooks Connection"
                        Command="{x:Bind ViewModel.TestQuickBooksConnectionCommand}"
                        HorizontalAlignment="Left" />

                    <TextBlock
                        FontSize="14">
                        <Run Text="Status: " />
                        <Run Text="{x:Bind ViewModel.QuickBooksConnected, Mode=OneWay}" FontWeight="Bold" />
                    </TextBlock>
                </StackPanel>
            </Border>

            <!-- Theme Settings -->
            <Border
                Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                CornerRadius="8"
                Padding="16">
                <StackPanel Spacing="12">
                    <TextBlock
                        Text="Appearance"
                        FontSize="20"
                        FontWeight="SemiBold" />

                    <ComboBox
                        Header="Theme"
                        ItemsSource="{x:Bind ViewModel.AvailableThemes, Mode=OneWay}"
                        SelectedItem="{x:Bind ViewModel.SelectedTheme, Mode=TwoWay}"
                        MinWidth="200" />
                </StackPanel>
            </Border>

            <!-- Action Buttons -->
            <StackPanel Orientation="Horizontal" Spacing="8" HorizontalAlignment="Right">
                <Button
                    Content="Reset to Defaults"
                    Command="{x:Bind ViewModel.ResetSettingsCommand}" />

                <Button
                    Content="Save Settings"
                    Command="{x:Bind ViewModel.SaveSettingsCommand}"
                    Style="{ThemeResource AccentButtonStyle}" />
            </StackPanel>
        </StackPanel>
    </ScrollViewer>
</UserControl>
