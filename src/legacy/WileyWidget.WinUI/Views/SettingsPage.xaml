<Page
    x:Class="WileyWidget.WinUI.Views.SettingsPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    Background="{ThemeResource ApplicationPageBackgroundThemeBrush}">

    <ScrollViewer>
        <StackPanel Spacing="16" Padding="24">
            <TextBlock Text="Settings" Style="{ThemeResource TitleTextBlockStyle}" />

            <Expander Header="Application Settings" IsExpanded="True">
                <StackPanel Spacing="12" Padding="12">
                    <TextBlock Text="Theme" Style="{ThemeResource BodyStrongTextBlockStyle}" />
                    <ComboBox x:Name="ThemeComboBox" 
                              Header="App Theme" 
                              SelectedIndex="0"
                              MinWidth="200"
                              AutomationProperties.Name="Theme Selection">
                        <ComboBoxItem Content="System Default" />
                        <ComboBoxItem Content="Light" />
                        <ComboBoxItem Content="Dark" />
                    </ComboBox>

                    <ToggleSwitch x:Name="NotificationsToggle" 
                                  Header="Enable Notifications"
                                  IsOn="True"
                                  AutomationProperties.Name="Notifications Toggle" />
                </StackPanel>
            </Expander>

            <Expander Header="QuickBooks Settings">
                <StackPanel Spacing="12" Padding="12">
                    <TextBox x:Name="CompanyIdTextBox"
                             Header="Company ID"
                             PlaceholderText="Enter QuickBooks Company ID"
                             AutomationProperties.Name="Company ID Input" />

                    <TextBox x:Name="ApiEndpointTextBox"
                             Header="API Endpoint"
                             PlaceholderText="https://quickbooks.api.intuit.com"
                             AutomationProperties.Name="API Endpoint Input" />

                    <PasswordBox x:Name="ApiKeyPasswordBox"
                                 Header="API Key"
                                 PlaceholderText="Enter API Key"
                                 AutomationProperties.Name="API Key Input" />
                </StackPanel>
            </Expander>

            <Expander Header="Data Management">
                <StackPanel Spacing="12" Padding="12">
                    <TextBlock Text="Sync Frequency" Style="{ThemeResource BodyStrongTextBlockStyle}" />
                    <Slider x:Name="SyncFrequencySlider"
                            Minimum="1"
                            Maximum="24"
                            Value="4"
                            Header="Hours between syncs"
                            AutomationProperties.Name="Sync Frequency Slider" />

                    <Button Content="Clear Cache"
                            Style="{ThemeResource AccentButtonStyle}"
                            AutomationProperties.Name="Clear Cache Button" />
                </StackPanel>
            </Expander>

            <StackPanel Orientation="Horizontal" Spacing="12" HorizontalAlignment="Right">
                <Button x:Name="SaveButton" 
                        Content="Save" 
                        Style="{ThemeResource AccentButtonStyle}"
                        Click="SaveButton_Click"
                        AutomationProperties.Name="Save Settings Button" />
                <Button x:Name="CancelButton" 
                        Content="Cancel"
                        Click="CancelButton_Click"
                        AutomationProperties.Name="Cancel Button" />
            </StackPanel>

            <InfoBar x:Name="StatusInfoBar" 
                     IsOpen="False"
                     Severity="Success"
                     Title="Settings Saved"
                     Message="Your settings have been saved successfully." />
        </StackPanel>
    </ScrollViewer>
</Page>
