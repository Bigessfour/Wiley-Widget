<Window
    x:Class="WileyWidget.Views.Main.ProgressView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:prism="http://prismlibrary.com/"
    xmlns:syncfusion="http://schemas.syncfusion.com/wpf"
    xmlns:behaviors="clr-namespace:WileyWidget.UI.Behaviors"
    xmlns:converters="clr-namespace:WileyWidget.Converters"
    xmlns:syncfusionskin="clr-namespace:Syncfusion.SfSkinManager;assembly=Syncfusion.SfSkinManager.WPF"
    mc:Ignorable="d"
    Title="{Binding Title}"
    Height="200"
    Width="400"
    WindowStyle="ToolWindow"
    WindowStartupLocation="CenterOwner"
    ResizeMode="NoResize"
    ShowInTaskbar="False"
    Topmost="True"
    prism:ViewModelLocator.AutoWireViewModel="True">
  <Window.Resources>
    <converters:BooleanToVisibilityConverter x:Key="BoolToVis" />
  </Window.Resources>

  <Grid
      Margin="20"
      behaviors:FocusOnLoadBehavior.IsEnabled="True"
      behaviors:FocusOnLoadBehavior.TargetName="ProgressFocusAnchor">
    <Grid.RowDefinitions>
      <RowDefinition Height="Auto" />
      <RowDefinition Height="Auto" />
      <RowDefinition Height="Auto" />
      <RowDefinition Height="Auto" />
    </Grid.RowDefinitions>
    <Border
        x:Name="ProgressFocusAnchor"
        Focusable="True"
        Width="0"
        Height="0"
        Opacity="0" />

    <!-- Progress Message -->
    <TextBlock
        Grid.Row="0"
        Text="{Binding Message}"
        TextWrapping="Wrap"
        Margin="0,0,0,15"
        HorizontalAlignment="Center"
        FontSize="14" />

    <!-- Progress Bar -->
    <ProgressBar
        Grid.Row="1"
        Height="20"
        Margin="0,0,0,15"
        Minimum="0"
        Maximum="100"
        Value="{Binding ProgressPercentage}"
        IsIndeterminate="{Binding IsIndeterminate}"
        AutomationProperties.Name="Progress bar"
        AutomationProperties.HelpText="Shows operation progress" />

    <!-- Progress Percentage Text (only shown when not indeterminate) -->
    <TextBlock
        Grid.Row="2"
        Text="{Binding ProgressPercentage, StringFormat={}{0}%}"
        HorizontalAlignment="Center"
        FontSize="12"
        Foreground="#FFCEE6FF"
        Visibility="{Binding IsIndeterminate, Converter={StaticResource BoolToVis}, ConverterParameter=Invert}"
        Margin="0,0,0,15" />

    <!-- Cancel Button -->
    <Button
        Grid.Row="3"
        Content="Cancel"
        Command="{Binding CancelCommand}"
        Width="80"
        Height="30"
        HorizontalAlignment="Center"
        IsEnabled="{Binding IsBusy, Converter={StaticResource BoolToVis}, ConverterParameter=Invert}"
        AutomationProperties.Name="Cancel operation"
        AutomationProperties.HelpText="Cancel the current operation" />
  </Grid>
</Window>
