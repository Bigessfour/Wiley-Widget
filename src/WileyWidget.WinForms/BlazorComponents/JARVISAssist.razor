@using Microsoft.AspNetCore.Components.Web
@using Microsoft.JSInterop
@using WileyWidget.Models
@using WileyWidget.Services.Abstractions
@using static WileyWidget.Models.ChatMessage
@using Syncfusion.Blazor
@using Syncfusion.Blazor.Inputs
@using Syncfusion.Blazor.Buttons
@using Syncfusion.Blazor.InteractiveChat
@using CommunityToolkit.Mvvm.Input
@implements IDisposable
@inject IChatBridgeService ChatBridge

<div class="jarvis-container">
    <SfAIAssistView @ref="_assistView"
                    CssClass="custom-ai-assist"
                    Prompts="@_prompts"
                    PromptPlaceholder="Type prompt for assistance..."
                    PromptIconCss="e-icons e-user-avatar"
                    ResponseIconCss="e-icons e-ai-assist"
                    PromptRequested="HandlePromptRequestedAsync">
        <ChildContent>
            <AssistViews>
                <AssistView Header="Jarvis - Wiley Widget Assistant"
                            IconCss="e-icons e-ai-assist">
                    <BannerTemplate>
                        <div class="assist-banner">
                            <div class="assist-banner-icon e-icons e-ai-assist"></div>
                            <div class="assist-banner-title">AI Assistance</div>
                            <div class="assist-banner-subtitle">Your everyday AI companion.</div>
                        </div>
                    </BannerTemplate>
                </AssistView>
            </AssistViews>
        </ChildContent>
    </SfAIAssistView>
</div>

<style>
    .jarvis-container {
        height: 100%;
        width: 100%;
        padding: 8px;
        box-sizing: border-box;
    }

    /* Keep the prompt box compact, closer to Syncfusion demo */
    .jarvis-container .e-assistview-input {
        min-height: 48px;
        max-height: 120px;
    }
</style>

@* Logic is implemented in the code-behind file JARVISAssist.razor.cs *@
