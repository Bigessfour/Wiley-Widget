# AI-Fetchable Manifest

This document describes the developer-focused manifest (`ai-fetchable-manifest.json`) generated by `scripts/tools/generate_repo_urls.py`. It complements the PowerShell-based `fetchability-resources.json` by adding GitHub URLs, categories, and a lightweight search index for AI tools.

## What it contains

- repository: remote URL, owner/repo, branch, commit hash, dirty state, generated_at
- summary: total_files, total_size, counts by categories and languages
- search_index: compact keyword list derived from file paths and descriptions
- files[]: for each file
  - metadata: path, size, last_modified, extension, language, line_count, encoding, is_binary, sha256
  - urls: blob_url, raw_url, history_url (GitHub)
  - context: category, importance, description, dependencies, related_files

## New fields and heuristics

- search_index: Up to ~500 keywords (e.g., prism, syncfusion, wpf, xaml, ai, dotnet) to improve discoverability.
- context.related_files:
  - XAML views are linked to their code-behind (\*.xaml.cs) and conventional ViewModels (e.g., BudgetView.xaml -> BudgetViewModel.cs).
  - Behavior classes link back to views that declare the `WileyWidget.Behaviors` namespace.
- context.dependencies: Tags inferred from file contents such as Prism, Syncfusion.WPF, WPF, Behaviors.

These are best-effort heuristics and do not modify source code.

## Generate the manifest

```powershell
# Generate in the repository root (all categories)
python .\scripts\tools\generate_repo_urls.py

# Include only specific categories (comma-separated)
python .\scripts\tools\generate_repo_urls.py -c source_code,documentation

# Write to a custom path
python .\scripts\tools\generate_repo_urls.py -o .\out\ai-fetchable-manifest.json
```

## Categories

- source*code (default for src/* and WileyWidget.\_ files)
- test
- documentation (docs/\*, README.md, etc.)
- automation (scripts/\*)
- configuration (_.csproj, _.sln, _.json, _.config)
- unknown

## Notes

- The manifest is read-only metadata and safe to publish.
- SHA256 hashes can be used for integrity checks.
- URLs follow the current branch as detected at generation time.
- If you filter by categories, files outside the set are omitted to reduce payload size.
