FROM otel/opentelemetry-collector-contrib:0.71.0

# Copy configuration
COPY otel-config.yaml /etc/otelcol-contrib/config.yaml

# Expose ports used by OTLP and the admin endpoint
EXPOSE 4317 4318 8888

# Healthcheck - the official image exposes admin on 8888 by default
HEALTHCHECK --interval=30s --timeout=10s --start-period=5s --retries=3 \
  CMD curl -f http://localhost:8888/health || exit 1

# Use the image's default entrypoint/command
