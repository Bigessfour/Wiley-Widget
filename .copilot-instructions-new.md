# Wiley Widget Development Guidelines# Wiley Widget Development Guidelines



## ÔøΩ Project Overview## ÔøΩ Project Overview

Wiley Widget is a .NET WPF application focused on municipal budgeting and utility management. Key technologies include Syncfusion for UI components, Prism for modular architecture and view management, Entity Framework Core for data access, and Microsoft.Extensions.Hosting for dependency injection. We're in the process of refactoring to put Prism fully in control of startup, views, and navigation‚Äîditching custom hacks for cleaner, more maintainable code.Wiley Widget is a .NET WPF application focused on municipal budgeting and utility management. Key technologies include Syncfusion for UI components, Prism for modular architecture and view management, Entity Framework Core for data access, and Microsoft.Extensions.Hosting for dependency injection. We're in the process of refactoring to put Prism fully in control of startup, views, and navigation‚Äîditching custom hacks for cleaner, more maintainable code.



## üöÄ Core Development Workflow## üöÄ Core Development Workflow



### Startup and Build### Startup and Build

- Use `dotnet build` for compilation.- Use `dotnet build` for compilation.

- Run the app with `dotnet run` from the src/ directory.- Run the app with `dotnet run` from the src/ directory.

- For watching changes: `dotnet watch run`.- For watching changes: `dotnet watch run`.

- Clean builds: `dotnet clean`.- Clean builds: `dotnet clean`.



### Configuration### Configuration

- Edit `appsettings.json` and `appsettings.Development.json` for environment-specific settings.- Edit `appsettings.json` and `appsettings.Development.json` for environment-specific settings.

- Use `App.config` for legacy config needs.- Use `App.config` for legacy config needs.

- Avoid hardcoding paths‚Äîleverage relative paths and environment variables.- Avoid hardcoding paths‚Äîleverage relative paths and environment variables.



### Debugging### Debugging

- Set breakpoints in VS Code or Visual Studio.- Set breakpoints in VS Code or Visual Studio.

- Use the built-in debugger for WPF-specific issues (e.g., UI threading problems).- Use the built-in debugger for WPF-specific issues (e.g., UI threading problems).

- Refer to `docs/DEBUGPY_STARTUP_GUIDE.md` for advanced startup debugging.- Refer to `docs/DEBUGPY_STARTUP_GUIDE.md` for advanced startup debugging.



## üß™ Testing Framework## üß™ Testing Framework



### Test Execution### Test Execution

- **C# Tests**: `dotnet test` from the root or test project directories.- **C# Tests**: `dotnet test` from the root or test project directories.

- **Python Tests**: Use pytest for all Python testing. Run with `python -m pytest` or VS Code test explorer.- **Python Tests**: Use pytest for all Python testing. Run with `python -m pytest` or VS Code test explorer.

- Integration tests: Focus on EF Core and Prism navigation‚Äîrun via `dotnet test --filter Category=Integration`.- Integration tests: Focus on EF Core and Prism navigation‚Äîrun via `dotnet test --filter Category=Integration`.

- UI tests: Use FlaUI for automation in WileyWidget.UiTests.- UI tests: Use FlaUI for automation in WileyWidget.UiTests.

- Aim for high coverage on ViewModels and services.- Aim for high coverage on ViewModels and services.



### Test Structure### Test Structure

- **Unit tests**: Isolate ViewModels, services, and utilities.- **Unit tests**: Isolate ViewModels, services, and utilities.

- **Integration tests**: Cover database migrations, Prism module init, and navigation flows.- **Integration tests**: Cover database migrations, Prism module init, and navigation flows.

- **UI tests**: Verify rendering and data binding for Syncfusion controls.- **UI tests**: Verify rendering and data binding for Syncfusion controls.

- **Python tests**: Use pytest with fixtures and parametrized tests. Avoid deprecated unittest methods.- **Python tests**: Use pytest with fixtures and parametrized tests. Avoid deprecated unittest methods.



## üîç Script Quality Checks## üîç Script Quality Checks



### PowerShell Scripts### PowerShell Scripts

- **PSScriptAnalyzer**: All new PS1 scripts must pass PSScriptAnalyzer validation with no warnings or errors.- **PSScriptAnalyzer**: All new PS1 scripts must pass PSScriptAnalyzer validation with no warnings or errors.

- **PowerShell 7.5.4 Syntax**: Use modern PowerShell 7.5.4 syntax and features.- **PowerShell 7.5.4 Syntax**: Use modern PowerShell 7.5.4 syntax and features.

- **No Write-Host**: Avoid `Write-Host` in production scripts; use `Write-Output`, `Write-Verbose`, or `Write-Information` instead.- **No Write-Host**: Avoid `Write-Host` in production scripts; use `Write-Output`, `Write-Verbose`, or `Write-Information` instead.

- **Error Handling**: Implement proper try/catch blocks and use `$ErrorActionPreference = 'Stop'`.- **Error Handling**: Implement proper try/catch blocks and use `$ErrorActionPreference = 'Stop'`.



### Python Scripts### Python Scripts

- **Syntax Validation**: All Python scripts must be syntax-error-free and pass Ruff linting.- **Syntax Validation**: All Python scripts must be syntax-error-free and pass Ruff linting.

- **Debugging**: Test Python scripts with debugger before committing to ensure they execute correctly.- **Debugging**: Test Python scripts with debugger before committing to ensure they execute correctly.

- **Type Hints**: Use type hints where appropriate for better code maintainability.- **Type Hints**: Use type hints where appropriate for better code maintainability.

- **Import Organization**: Keep imports organized and avoid unused imports (Ruff will catch these).- **Import Organization**: Keep imports organized and avoid unused imports (Ruff will catch these).- **Python tests**: Use pytest with fixtures and parametrized tests. Avoid deprecated unittest methods.



## üìã VS Code Integration## üìã VS Code Integration

### MCP (Model Context Protocol) Integration

The project uses MCP for enhanced AI assistance and environment management:

- **Filesystem MCP Server**: Provides secure file system access for AI tools within the workspace
- **Environment Variables**: Secrets loaded from user environment variables (GITHUB_TOKEN, XAI_API_KEY, SYNCFUSION_LICENSE_KEY)
- **Profile Integration**: PowerShell profile includes MCP status checking (`Get-MCPStatus`, `Get-MCPCacheStatus`)

### Recommended Extensions### Recommended Extensions

- C# (ms-dotnettools.csharp) for IntelliSense and debugging.- C# (ms-dotnettools.csharp) for IntelliSense and debugging.

- NuGet Gallery for package management.- NuGet Gallery for package management.

- WPF Tools for XAML preview (if available).- WPF Tools for XAML preview (if available).

- GitLens for better version control insights.- GitLens for better version control insights.



### Available Tasks (in .vscode/tasks.json)### Available Tasks (in .vscode/tasks.json)

- `build`: Runs `dotnet build`.- `build`: Runs `dotnet build`.

- `test`: Runs `dotnet test`.- `test`: Runs `dotnet test`.

- `clean`: Runs `dotnet clean`.- `clean`: Runs `dotnet clean`.

- `watch`: Runs `dotnet watch run` for hot reload.- `watch`: Runs `dotnet watch run` for hot reload.



### Recommended Workflow### Recommended Workflow

1. **Build**: Run "build" task.1. **Build**: Run "build" task.

2. **Develop**: Edit code with hot reload via "watch" task.2. **Develop**: Edit code with hot reload via "watch" task.

3. **Test**: Run "test" task for feedback.3. **Test**: Run "test" task for feedback.

4. **Commit**: Use GitLens to review changes.4. **Commit**: Use GitLens to review changes.



## üîß Development Best Practices## üîß Development Best Practices



### Code Standards### Code Standards

- Follow layered architecture: Separate concerns into Views, ViewModels, Models, Services.- Follow layered architecture: Separate concerns into Views, ViewModels, Models, Services.

- Use Prism for all view registration, navigation, and module management.- Use Prism for all view registration, navigation, and module management.

- Inject dependencies via constructor injection.- Inject dependencies via constructor injection.

- Handle UI threading properly‚Äîdispatch to UI thread for updates.- Handle UI threading properly‚Äîdispatch to UI thread for updates.



### Prism Usage### Prism Usage

- Bootstrapper handles startup: Inherit from PrismBootstrapper for shell creation and module config.- Bootstrapper handles startup: Inherit from PrismBootstrapper for shell creation and module config.

- Register views with regions in module Initialize().- Register views with regions in module Initialize().

- Use INavigationAware in ViewModels for parameterized navigation.- Use INavigationAware in ViewModels for parameterized navigation.

- Avoid custom navigation services‚Äîstick to Prism's RegionManager.- Avoid custom navigation services‚Äîstick to Prism's RegionManager.



### Syncfusion Integration### Syncfusion Integration

- Apply theming using `SfSkinManager` as documented by Syncfusion.- Apply theming using `SfSkinManager` as documented by Syncfusion.

- Test rendering in UI tests to catch binding issues.- Test rendering in UI tests to catch binding issues.



### Contribution### Contribution

- Follow `CONTRIBUTING.md` for PRs.- Follow `CONTRIBUTING.md` for PRs.

- Update `CHANGELOG.md` and `RELEASE_NOTES.md` with changes.- Update `CHANGELOG.md` and `RELEASE_NOTES.md` with changes.

- Run tests before pushing.- Run tests before pushing.



## üé® Theme Management Guidelines## üé® Theme Management Guidelines



- Follow Syncfusion‚Äôs official guidance for `SfSkinManager` when applying themes.

- Set the application-wide theme early in startup using `SfSkinManager.ApplicationTheme` or `SfSkinManager.SetTheme`.

- Ensure the corresponding theme assemblies (for example, `Syncfusion.Themes.FluentDark.WPF.dll`) are referenced when a theme is used.

- Keep any shared helper (such as `ThemeUtility`) aligned with documented Syncfusion behavior, using it as a thin wrapper when desired.















